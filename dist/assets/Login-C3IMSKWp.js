import{d as I,k as C,b as L,r as a,o as B,c as F,w as n,f as m,g as u,a as t,u as i,z as _}from"./index-SbsWRYZY.js";import{u as N}from"./useForm-GBUJnrfe.js";import{u as R}from"./useToast-DQzCMGjp.js";import{v as d}from"./utils-Blx_SZM_.js";import{a as U}from"./axios-CCb-kr4I.js";const j={class:"text-base mb-4 leading-5"},q={class:"auth-layout__options flex flex-col sm:flex-row items-start sm:items-center justify-between"},A={class:"flex justify-center mt-4"},E=I({__name:"Login",setup(M){const{validate:b}=N("form"),{push:v}=C(),{init:c}=R(),o=L({email:"",password:"",keepLoggedIn:!1}),f=async()=>{var p,e;if(b())try{(await U.post("http://47.239.17.192:80/auth/login",{email:o.email,password:o.password})).status===200&&(c({message:"你已成功登录",color:"success"}),v({name:"dashboard"}))}catch(l){const r=((e=(p=l.response)==null?void 0:p.data)==null?void 0:e.error)||"登录失败";c({message:r,color:"danger"})}};return(p,e)=>{const l=a("RouterLink"),r=a("VaInput"),x=a("VaIcon"),g=a("VaValue"),k=a("VaCheckbox"),y=a("VaButton"),w=a("VaForm");return B(),F(w,{ref:"form",onSubmit:_(f,["prevent"])},{default:n(()=>[e[7]||(e[7]=m("h1",{class:"font-semibold text-4xl mb-4"},"登录",-1)),m("p",j,[e[4]||(e[4]=u(" 没有账号? ")),t(l,{to:{name:"signup"},class:"font-semibold text-primary"},{default:n(()=>e[3]||(e[3]=[u("注册")])),_:1})]),t(r,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=s=>o.email=s),rules:[i(d).required,i(d).email],class:"mb-4",label:"用户名",type:"email"},null,8,["modelValue","rules"]),t(g,{"default-value":!1},{default:n(s=>[t(r,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=V=>o.password=V),rules:[i(d).required],type:s.value?"text":"password",class:"mb-4",label:"密码",onClickAppendInner:_(V=>s.value=!s.value,["stop"])},{appendInner:n(()=>[t(x,{name:s.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),m("div",q,[t(k,{modelValue:o.keepLoggedIn,"onUpdate:modelValue":e[2]||(e[2]=s=>o.keepLoggedIn=s),class:"mb-2 sm:mb-0",label:"记住密码"},null,8,["modelValue"]),t(l,{to:{name:"recover-password"},class:"mt-2 sm:mt-0 sm:ml-1 font-semibold text-primary"},{default:n(()=>e[5]||(e[5]=[u(" 忘记密码? ")])),_:1})]),m("div",A,[t(y,{class:"w-full",onClick:f},{default:n(()=>e[6]||(e[6]=[u(" 登录")])),_:1})])]),_:1},512)}}});export{E as default};
//# sourceMappingURL=Login-C3IMSKWp.js.map
