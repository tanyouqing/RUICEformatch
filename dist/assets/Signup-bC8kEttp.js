import{d as g,k,b as I,r,o as C,c as A,w as l,f as u,g as d,a as n,z as i}from"./index-By11hEvf.js";import{u as B}from"./useForm-C9b_tPZM.js";import{u as R}from"./useToast-CWDGN--A.js";import{a as q}from"./axios-CCb-kr4I.js";const F={class:"text-base mb-4 leading-5"},N={class:"flex justify-center mt-4"},M=g({__name:"Signup",setup(U){const{validate:v}=B("form"),{push:V}=k(),{init:c}=R(),t=I({email:"",password:"",repeatPassword:""}),f=async()=>{var e,o;if(v())try{(await q.post("http://47.239.17.192:80/auth/register",{email:t.email,password:t.password})).status===201&&(c({message:"你已经成功注册",color:"success"}),V({name:"dashboard"}))}catch(m){const p=((o=(e=m.response)==null?void 0:e.data)==null?void 0:o.error)||"注册失败";c({message:p,color:"danger"})}},w=[e=>!!e||"Password field is required",e=>e&&e.length>=8||"密码只有有8个字符",e=>e&&/[A-Za-z]/.test(e)||"密码至少包含一个字母",e=>e&&/\d/.test(e)||"密码至少包含一个数字",e=>e&&/[!@#$%^&*(),.?":{}|<>]/.test(e)||"密码至少包含一个特殊字符"];return(e,o)=>{const m=r("RouterLink"),p=r("VaInput"),_=r("VaIcon"),y=r("VaValue"),b=r("VaButton"),x=r("VaForm");return C(),A(x,{ref:"form",onSubmit:i(f,["prevent"])},{default:l(()=>[o[6]||(o[6]=u("h1",{class:"font-semibold text-4xl mb-4"},"注册",-1)),u("p",F,[o[4]||(o[4]=d(" 已有帐号? ")),n(m,{to:{name:"login"},class:"font-semibold text-primary"},{default:l(()=>o[3]||(o[3]=[d("登录")])),_:1})]),n(p,{modelValue:t.email,"onUpdate:modelValue":o[0]||(o[0]=s=>t.email=s),rules:[s=>!!s||"Email field is required",s=>/.+@.+\..+/.test(s)||"Email should be valid"],class:"mb-4",label:"邮箱",type:"email"},null,8,["modelValue","rules"]),n(y,{"default-value":!1},{default:l(s=>[n(p,{ref:"password1",modelValue:t.password,"onUpdate:modelValue":o[1]||(o[1]=a=>t.password=a),rules:w,type:s.value?"text":"password",class:"mb-4",label:"密码",messages:"密码至少为8位且包含: 字母, 数字, 特殊字符.",onClickAppendInner:i(a=>s.value=!s.value,["stop"])},{appendInner:l(()=>[n(_,{name:s.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","type","onClickAppendInner"]),n(p,{ref:"password2",modelValue:t.repeatPassword,"onUpdate:modelValue":o[2]||(o[2]=a=>t.repeatPassword=a),rules:[a=>!!a||"Repeat Password field is required",a=>a===t.password||"Passwords don't match"],type:s.value?"text":"password",class:"mb-4",label:"再次输入密码",onClickAppendInner:i(a=>s.value=!s.value,["stop"])},{appendInner:l(()=>[n(_,{name:s.value?"mso-visibility_off":"mso-visibility",class:"cursor-pointer",color:"secondary"},null,8,["name"])]),_:2},1032,["modelValue","rules","type","onClickAppendInner"])]),_:1}),u("div",N,[n(b,{class:"w-full",onClick:f},{default:l(()=>o[5]||(o[5]=[d(" 创建账号")])),_:1})])]),_:1},512)}}});export{M as default};
//# sourceMappingURL=Signup-bC8kEttp.js.map
