{"version":3,"file":"Signup-BoPxcSJ-.js","sources":["../../src/pages/auth/Signup.vue"],"sourcesContent":["<template>\n  <VaForm ref=\"form\" @submit.prevent=\"submit\">\n    <h1 class=\"font-semibold text-4xl mb-4\">注册</h1>\n    <p class=\"text-base mb-4 leading-5\">\n      已有帐号?\n      <RouterLink :to=\"{ name: 'login' }\" class=\"font-semibold text-primary\">登录</RouterLink>\n    </p>\n    <VaInput\n      v-model=\"formData.email\"\n      :rules=\"[(v) => !!v || 'Email field is required', (v) => /.+@.+\\..+/.test(v) || 'Email should be valid']\"\n      class=\"mb-4\"\n      label=\"邮箱\"\n      type=\"email\"\n    />\n    <VaValue v-slot=\"isPasswordVisible\" :default-value=\"false\">\n      <VaInput\n        ref=\"password1\"\n        v-model=\"formData.password\"\n        :rules=\"passwordRules\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"密码\"\n        messages=\"密码至少为8位且包含: 字母, 数字, 特殊字符.\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n      <VaInput\n        ref=\"password2\"\n        v-model=\"formData.repeatPassword\"\n        :rules=\"[\n          (v) => !!v || 'Repeat Password field is required',\n          (v) => v === formData.password || 'Passwords don\\'t match',\n        ]\"\n        :type=\"isPasswordVisible.value ? 'text' : 'password'\"\n        class=\"mb-4\"\n        label=\"再次输入密码\"\n        @clickAppendInner.stop=\"isPasswordVisible.value = !isPasswordVisible.value\"\n      >\n        <template #appendInner>\n          <VaIcon\n            :name=\"isPasswordVisible.value ? 'mso-visibility_off' : 'mso-visibility'\"\n            class=\"cursor-pointer\"\n            color=\"secondary\"\n          />\n        </template>\n      </VaInput>\n    </VaValue>\n\n    <div class=\"flex justify-center mt-4\">\n      <VaButton class=\"w-full\" @click=\"submit\"> 创建账号</VaButton>\n    </div>\n  </VaForm>\n</template>\n\n<script lang=\"ts\" setup>\nimport { reactive } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useForm, useToast } from 'vuestic-ui'\nimport axios from 'axios'\n\nconst { validate } = useForm('form')\nconst { push } = useRouter()\nconst { init } = useToast()\n\nconst formData = reactive({\n  email: '',\n  password: '',\n  repeatPassword: '',\n})\n\nconst submit = async () => {\n  if (validate()) {\n    try {\n      const response = await axios.post('http://47.239.17.192:80/auth/register', {\n        email: formData.email,\n        password: formData.password,\n      })\n\n      if (response.status === 201) {\n        init({\n          message: '你已经成功注册',\n          color: 'success',\n        })\n        push({ name: 'dashboard' })\n      }\n    } catch (error) {\n      const errorMessage = (error as any).response?.data?.error || '注册失败'\n      init({ message: errorMessage, color: 'danger' })\n    }\n  }\n}\n\nconst passwordRules: ((v: string) => boolean | string)[] = [\n  (v) => !!v || 'Password field is required',\n  (v) => (v && v.length >= 8) || '密码只有有8个字符',\n  (v) => (v && /[A-Za-z]/.test(v)) || '密码至少包含一个字母',\n  (v) => (v && /\\d/.test(v)) || '密码至少包含一个数字',\n  (v) => (v && /[!@#$%^&*(),.?\":{}|<>]/.test(v)) || '密码至少包含一个特殊字符',\n]\n</script>\n"],"names":["validate","useForm","push","useRouter","init","useToast","formData","reactive","submit","axios","error","errorMessage","_b","_a","passwordRules","v"],"mappings":"+UAmEA,KAAM,CAAE,SAAAA,CAAA,EAAaC,EAAQ,MAAM,EAC7B,CAAE,KAAAC,GAASC,IACX,CAAE,KAAAC,GAASC,IAEXC,EAAWC,EAAS,CACxB,MAAO,GACP,SAAU,GACV,eAAgB,EAAA,CACjB,EAEKC,EAAS,SAAY,SACzB,GAAIR,IACE,GAAA,EACe,MAAMS,EAAM,KAAK,wCAAyC,CACzE,MAAOH,EAAS,MAChB,SAAUA,EAAS,QAAA,CACpB,GAEY,SAAW,MACjBF,EAAA,CACH,QAAS,UACT,MAAO,SAAA,CACR,EACIF,EAAA,CAAE,KAAM,WAAA,CAAa,SAErBQ,EAAO,CACd,MAAMC,IAAgBC,GAAAC,EAAAH,EAAc,WAAd,YAAAG,EAAwB,OAAxB,YAAAD,EAA8B,QAAS,OAC7DR,EAAK,CAAE,QAASO,EAAc,MAAO,QAAU,CAAA,CACjD,CACF,EAGIG,EAAqD,CACxDC,GAAM,CAAC,CAACA,GAAK,6BACbA,GAAOA,GAAKA,EAAE,QAAU,GAAM,YAC9BA,GAAOA,GAAK,WAAW,KAAKA,CAAC,GAAM,aACnCA,GAAOA,GAAK,KAAK,KAAKA,CAAC,GAAM,aAC7BA,GAAOA,GAAK,yBAAyB,KAAKA,CAAC,GAAM,cAAA"}